<!doctype html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<title>How to run SPCAF v5 analysis during TeamBuild in TFS 2013 - Joost&#39;s blog</title>
<meta name="viewport" content="width=device-width, initial-scale=1">


<meta name="generator" content="Hugo 0.73.0" /><meta itemprop="name" content="How to run SPCAF v5 analysis during TeamBuild in TFS 2013">
<meta itemprop="description" content="This how-to is based on the SPCAF how-to written for TFS 2012.
If you are looking how to run SPCAF v4 during TeamBuild in TFS 2013, see this post.">
<meta itemprop="datePublished" content="2014-10-16T06:22:23&#43;00:00" />
<meta itemprop="dateModified" content="2014-10-16T06:22:23&#43;00:00" />
<meta itemprop="wordCount" content="1307">
<meta itemprop="image" content="https://joosthaneveer.github.io/wp-content/uploads/2013/12/120613_1318_HowtorunSPC9.jpg">



<meta itemprop="keywords" content="Build,SPCAF,TFS 2013," /><meta property="og:title" content="How to run SPCAF v5 analysis during TeamBuild in TFS 2013" />
<meta property="og:description" content="This how-to is based on the SPCAF how-to written for TFS 2012.
If you are looking how to run SPCAF v4 during TeamBuild in TFS 2013, see this post." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://joosthaneveer.github.io/sharepoint/run-spcaf-analysis-teambuild/" />
<meta property="og:image" content="https://joosthaneveer.github.io/wp-content/uploads/2013/12/120613_1318_HowtorunSPC9.jpg" />
<meta property="article:published_time" content="2014-10-16T06:22:23+00:00" />
<meta property="article:modified_time" content="2014-10-16T06:22:23+00:00" />
<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="https://joosthaneveer.github.io/wp-content/uploads/2013/12/120613_1318_HowtorunSPC9.jpg"/>

<meta name="twitter:title" content="How to run SPCAF v5 analysis during TeamBuild in TFS 2013"/>
<meta name="twitter:description" content="This how-to is based on the SPCAF how-to written for TFS 2012.
If you are looking how to run SPCAF v4 during TeamBuild in TFS 2013, see this post."/>
<meta name="twitter:site" content="@joosthaneveer"/>
<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.0.3/styles/github.min.css"><link rel="stylesheet" href="/css/normalize.css">
        <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Raleway:400,800,900|Source+Sans+Pro:400,700">
        <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/academicons/1.8.6/css/academicons.min.css">
        <script src="https://kit.fontawesome.com/be54eb011a.js" crossorigin="anonymous"></script>
        <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.css" /><link rel="stylesheet" href="/css/main.min.f6072bc46612793d6659c7d53f393936ecb0b7baf2813888f1761a141e8b53b6.css" integrity="sha256-9gcrxGYSeT1mWcfVPzk5Nuywt7rygTiI8XYaFB6LU7Y="><link rel="stylesheet" href="/css/add-on.css">
</head>

  <body>
    

<header id="site-header">
  <nav id="site-nav">
    <h1 class="nav-title">
      <a href="/" class="nav">
        
          Joost's blog
        
      </a>
    </h1>
    <menu id="site-nav-menu" class="flyout-menu menu">
      
        
          
          
            <a href="/posts/" class="nav link"><i class='far fa-newspaper'></i> Blog</a>
          
        
      
        
          
          
            <a href="/about/" class="nav link"><i class='far fa-id-card'></i> About</a>
          
        
      
        
          
          
            <a href="/categories/" class="nav link"><i class='fas fa-sitemap'></i> Categories</a>
          
        
      
      <a href="#share-menu" class="nav share-toggle"><i class="fas fa-share-alt">&nbsp;</i>Share</a>
      <a href="#search-input" class="nav search-toggle"><i class="fas fa-search">&nbsp;</i>Search</a>
    </menu>
    <a href="#search-input" class="nav search-toggle"><i class="fas fa-search fa-2x">&nbsp;</i></a>
    <a href="#share-menu" class="nav share-toggle"><i class="fas fa-share-alt fa-2x">&nbsp;</i></a>
    
    <a href="#site-nav" class="nav nav-toggle"><i class="fas fa-bars fa-2x"></i></a>
  </nav>
  <menu id="search" class="menu"><input id="search-input" class="search-input menu"></input><div id="search-results" class="search-results menu"></div></menu>
  
  
    <menu id="share-menu" class="flyout-menu menu">
      <h1>Share Post</h1>
      




  
    
    <a href="//twitter.com/share?text=How%20to%20run%20SPCAF%20v5%20analysis%20during%20TeamBuild%20in%20TFS%202013&amp;url=https%3a%2f%2fjoosthaneveer.github.io%2fsharepoint%2frun-spcaf-analysis-teambuild%2f" target="_blank" rel="noopener" class="nav share-btn twitter">
        <i class="fab fa-twitter"></i><p>&nbsp;Twitter</p>
      </a>
  

  
      <a href="//www.facebook.com/sharer/sharer.php?u=https%3a%2f%2fjoosthaneveer.github.io%2fsharepoint%2frun-spcaf-analysis-teambuild%2f" target="_blank" rel="noopener" class="nav share-btn facebook">
        <i class="fab fa-facebook"></i><p>&nbsp;Facebook</p>
        </a>
  

  
        <a href="//www.linkedin.com/shareArticle?url=https%3a%2f%2fjoosthaneveer.github.io%2fsharepoint%2frun-spcaf-analysis-teambuild%2f&amp;title=How%20to%20run%20SPCAF%20v5%20analysis%20during%20TeamBuild%20in%20TFS%202013" target="_blank" rel="noopener" class="nav share-btn linkedin">
            <i class="fab fa-linkedin"></i><p>&nbsp;LinkedIn</p>
          </a>
  

  
        <a href="mailto:?subject=Check%20out%20this%20post%20by Joost&amp;body=https%3a%2f%2fjoosthaneveer.github.io%2fsharepoint%2frun-spcaf-analysis-teambuild%2f" target="_blank" class="nav share-btn email" data-proofer-ignore>
          <i class="fas fa-envelope"></i><p>&nbsp;Email</p>
        </a>
  


    </menu>
  
</header>

    <div id="wrapper">
      <section id="site-intro" >
  <a href="/"><img src="https://www.gravatar.com/avatar/6fcb81b5de538fb939bc87beb56592d8?s=150&amp;d=mp" class="circle" width="" alt="Photo Joost Haneveer" /></a>
  <header>
    <h1>Joost's blog</h1>
  </header>
  <main>
    
  </main>
  
    <footer>
      <ul class="socnet-icons">
        

        <li><a href="//github.com/joosthaneveer" target="_blank" rel="noopener" title="GitHub" class="fab fa-github"></a></li>











<li><a href="//linkedin.com/in/joosthaneveer" target="_blank" rel="noopener" title="LinkedIn" class="fab fa-linkedin"></a></li>















<li><a href="//twitter.com/joosthaneveer" target="_blank" rel="noopener" title="Twitter" class="fab fa-twitter"></a></li>













      </ul>
    </footer>
  
</section>

      <main id="site-main">
        
  <article class="post">
    <header>
  <div class="title">
    
      <h2><a href="/sharepoint/run-spcaf-analysis-teambuild/">How to run SPCAF v5 analysis during TeamBuild in TFS 2013</a></h2>
    
    
  </div>
  <div class="meta">
    <time class="published" datetime="2014-10-16 06:22:23 &#43;0000 UTC">
      October 16, 2014
    </time>
    <span class="author">Joost</span>
    
      <p>7 minute read</p>
    
  </div>
</header>

    <section id="socnet-share">
      




  
    
    <a href="//twitter.com/share?text=How%20to%20run%20SPCAF%20v5%20analysis%20during%20TeamBuild%20in%20TFS%202013&amp;url=https%3a%2f%2fjoosthaneveer.github.io%2fsharepoint%2frun-spcaf-analysis-teambuild%2f" target="_blank" rel="noopener" class="nav share-btn twitter">
        <i class="fab fa-twitter"></i><p>&nbsp;Twitter</p>
      </a>
  

  
      <a href="//www.facebook.com/sharer/sharer.php?u=https%3a%2f%2fjoosthaneveer.github.io%2fsharepoint%2frun-spcaf-analysis-teambuild%2f" target="_blank" rel="noopener" class="nav share-btn facebook">
        <i class="fab fa-facebook"></i><p>&nbsp;Facebook</p>
        </a>
  

  
        <a href="//www.linkedin.com/shareArticle?url=https%3a%2f%2fjoosthaneveer.github.io%2fsharepoint%2frun-spcaf-analysis-teambuild%2f&amp;title=How%20to%20run%20SPCAF%20v5%20analysis%20during%20TeamBuild%20in%20TFS%202013" target="_blank" rel="noopener" class="nav share-btn linkedin">
            <i class="fab fa-linkedin"></i><p>&nbsp;LinkedIn</p>
          </a>
  

  
        <a href="mailto:?subject=Check%20out%20this%20post%20by Joost&amp;body=https%3a%2f%2fjoosthaneveer.github.io%2fsharepoint%2frun-spcaf-analysis-teambuild%2f" target="_blank" class="nav share-btn email" data-proofer-ignore>
          <i class="fas fa-envelope"></i><p>&nbsp;Email</p>
        </a>
  


    </section>
    
  <a href="/sharepoint/run-spcaf-analysis-teambuild/" class="image featured">
    
      <img src="https://joosthaneveer.github.io/wp-content/uploads/2013/12/120613_1318_HowtorunSPC9.jpg" alt="">
    
  </a>


    <div class="content">
      <p><em>This how-to is based on the <a href="http://docs.spcaf.com/v5/SPCAF_OVERVIEW_660_HOWTORUNSPCAFINTEAMBUILD.html">SPCAF how-to written for TFS 2012</a>.</em></p>
<p><em>If you are looking how to run SPCAF v4 during TeamBuild in TFS 2013, see <a href="http://joost.haneveer.nl/sharepoint/run-spcaf-analysis-teambuild-tfs-2013/" title="How to run SPCAF analysis during TeamBuild in TFS 2013">this</a> post.</em></p>
<hr>
<p>SharePoint code analysis with <a href="http://www.spcaf.com">SPCAF</a> can also be executed during a TFS Team Build. This helps to ensure the correctness of the SharePoint code. During the Team Build all found errors and warnings are listed in the build result. Additionally the SPCAF reports can be generated and saved to the output directory.</p>
<p>SPCAF supports the Team Build with the following products:</p>
<ul>
<li>TFS 2010</li>
<li>TFS 2012</li>
<li>TFS 2013 (with this how-to)</li>
<li>Visual Studio Online</li>
</ul>
<p>To support TFS 2010 and TFS 2012/2013 and VSO, SPCAF comes with 2 different build activities which can be integrated into the workflow of a Team Build, depending on the version of TFS. The build activities can be found within the installation directory of SPCAF in subfolder “TeamBuildActivities”.</p>
<ul>
<li>SPCAF.BuildActivity.TFS2010.dll for TFS 2010</li>
<li>SPCAF.BuildActivity.TFS2012.dll for TFS 2012/2013 and Visual Studio Online</li>
</ul>
<p><strong>Note</strong>: The build activities should not be copied directly into the installation folder of SPCAF because SPCAF searches during analysis within the installation folder for custom rules. As the activities depend on Team Build assemblies they cannot be loaded and SPCAF cannot execute.</p>
<p><strong>Note</strong>: If you are not familiar with configuration of team builds in TFS please request somebody to help you.</p>
<p>The following steps provide the general instructions for the Team Build. Some standard TFS configuration steps are skipped.</p>
<h3 id="preparation">Preparation</h3>
<p>To run SPCAF on the build server the SPCAF assemblies must be available on the build server. You don’t need to install SPCAF on the server!</p>
<p><strong>Note:</strong> You can download a preconfigured package of SPCAF Server from the <a href="http://visualstudiogallery.msdn.microsoft.com/6273311f-d947-4179-be03-fa6a6f9ffa63">Visual Studio Gallery</a> and skip steps 2 to 4 of the following description.</p>
<ol>
<li>
<p>Open Source Control of TFS and navigate to folder “BuildProcessTemplates” of your team project. It is possible that this folder does not exist in your TFS 2013 team project. You can create it manually.</p>
</li>
<li>
<p>Create a subfolder “CustomAssemblies” and check in</p>
</li>
<li>
<p>Within this folder create a subfolder “SPCAF”</p>
</li>
<li>
<p>Copy only the following assemblies from SPCAF installation directory to that folder:</p>
<ul>
<li>ICSharpCode.Decompiler.dll</li>
<li>ICSharpCode.NRefactory.CSharp.dll</li>
<li>ICSharpCode.NRefactory.dll</li>
<li>Jurassic.dll</li>
<li>log4net.dll</li>
<li>Microsoft.Deployment.Compression.Cab.dll</li>
<li>Microsoft.Deployment.Compression.dll</li>
<li>Mono.Cecil.dll</li>
<li>Mono.Cecil.Pdb.dll</li>
<li>SPCAF.Dependencies.dll</li>
<li>SPCAF.exe</li>
<li>SPCAF.exe.config</li>
<li>SPCAF.Engine.dll</li>
<li>SPCAF.Engine.dll.config</li>
<li>SPCAF.Inventory.dll</li>
<li>SPCAF.Metrics.dll</li>
<li>SPCAF.Reports.dll</li>
<li>SPCAF.Reports.Engine.dll</li>
<li>SPCAF.Reports.MigrationAssessment.dll</li>
<li>SPCAF.Rules.Apps.dll</li>
<li>SPCAF.Rules.dll</li>
<li>SPCAF.Rules.JavaScript.dll</li>
<li>SPCAF.Rules.MigrationAssessment.dll</li>
<li>SPCAF.Integration.CSSLint.dll</li>
<li>SPCAF.Integration.CSSLintRunner.exe</li>
<li>SPCAF.Integration.JSHint.dll</li>
<li>SPCAF.Integration.JSHintRunner.exe</li>
<li>SPCAF.Sdk.dll</li>
<li>SPCAF.Sdk.XmlSerializers.dll</li>
<li>log4net.config</li>
<li>RazorEngine.dll</li>
<li>System.Web.Razor.dll</li>
</ul>
<p><strong>Do not deploy the assemblies</strong></p>
<ul>
<li>SPCAF.VSPackage</li>
<li>SPCAF.VSPackage.Common</li>
</ul>
</li>
<li>
<p>Also include the License.lic file with your license (can be found in users AppData directory)</p>
</li>
<li>
<p>Copy the assembly from folder “TeamBuildActivites” in the SPCAF installation directory to that folder in TFS</p>
</li>
<li>
<p>Copy the folder “RuleSets” to the folder in TFS</p>
<p>You should end up as shown in the following screenshot:</p>




























<img 
  sizes="(min-width: 25em) 720px, 100vw"
  srcset='
  
    /sharepoint/run-spcaf-analysis-teambuild/SPCAF-files_huf0f5c7601adb55e10486cfa9ddccf263_53684_400x0_resize_box_2.png 400w
  
  
    , /sharepoint/run-spcaf-analysis-teambuild/SPCAF-files_huf0f5c7601adb55e10486cfa9ddccf263_53684_500x0_resize_box_2.png 500w
  
  
    , /sharepoint/run-spcaf-analysis-teambuild/SPCAF-files_huf0f5c7601adb55e10486cfa9ddccf263_53684_600x0_resize_box_2.png 600w
  
  '
  
    src="/sharepoint/run-spcaf-analysis-teambuild/SPCAF-files.png" 
  
  alt="">
</li>
</ol>
<h3 id="configure-build-controller-to-load-the-spcaf-assemblies">Configure Build Controller to load the SPCAF Assemblies</h3>
<p>Now we need to tell the Build Controller that during a build the SPCAF assemblies should be loaded.</p>




























<img 
  sizes="(min-width: 25em) 720px, 100vw"
  srcset='
  
    /sharepoint/run-spcaf-analysis-teambuild/120613_1318_HowtorunSPC2_huc80aab273182911241797e8abe54d8a6_92312_400x0_resize_q90_box.jpg 400w
  
  
    , /sharepoint/run-spcaf-analysis-teambuild/120613_1318_HowtorunSPC2_huc80aab273182911241797e8abe54d8a6_92312_500x0_resize_q90_box.jpg 500w
  
  
    , /sharepoint/run-spcaf-analysis-teambuild/120613_1318_HowtorunSPC2_huc80aab273182911241797e8abe54d8a6_92312_600x0_resize_q90_box.jpg 600w
  
  '
  
    src="/sharepoint/run-spcaf-analysis-teambuild/120613_1318_HowtorunSPC2.jpg" 
  
  alt="">
<h3 id="add-spcaf-build-activity-to-the-process-template">Add SPCAF Build Activity to the Process Template</h3>
<p>It is possible to manually edit the process template with a text editor. In this how-to you are going to use the designer in Visual Studio.</p>
<h4 id="add-build-activity-with-designer-in-visual-studio">Add Build Activity with Designer in Visual Studio</h4>
<p>If you don’t want to add the build activity to the process template in XML you can use a visual designer in Visual Studio.</p>
<ol>
<li>
<p>Make a copy of an existing Process Template e.g. DefaultTemplate.xaml in TFS an name it for instance DefaultTemplateSPCAF.xaml</p>
</li>
<li>
<p>Create a new project of type Class library in Visual Studio and delete the default created Class.cs</p>
</li>
<li>
<p>Add the copied Process template ‘DefaultTemplateSPCAF.xaml’ to the project via “Add Existing Item” and navigate to the folder with DefaultTemplateSPCAF.xaml. Important: Select “Add As Link” in the dialog to add only a link to the file.</p>




























<img 
  sizes="(min-width: 25em) 720px, 100vw"
  srcset='
  
    /sharepoint/run-spcaf-analysis-teambuild/120613_1318_HowtorunSPC3_hufba723ab3af6f9f1afae6e57c9175409_94904_400x0_resize_q90_box.jpg 400w
  
  
    , /sharepoint/run-spcaf-analysis-teambuild/120613_1318_HowtorunSPC3_hufba723ab3af6f9f1afae6e57c9175409_94904_500x0_resize_q90_box.jpg 500w
  
  
    , /sharepoint/run-spcaf-analysis-teambuild/120613_1318_HowtorunSPC3_hufba723ab3af6f9f1afae6e57c9175409_94904_600x0_resize_q90_box.jpg 600w
  
  
    , /sharepoint/run-spcaf-analysis-teambuild/120613_1318_HowtorunSPC3_hufba723ab3af6f9f1afae6e57c9175409_94904_720x0_resize_q90_box.jpg 720w 
  '
  
    src="/sharepoint/run-spcaf-analysis-teambuild/120613_1318_HowtorunSPC3.jpg" 
  
  alt="">
</li>
<li>
<p>Add the necessary reference to the project:</p>
<ul>
<li>Microsoft.TeamFoundation.Build.Workflow.dll</li>
<li>Microsoft.TeamFoundation.VersionControl.Client.dll</li>
<li>Microsoft.TeamFoundation.VersionControl.Common.dll</li>
</ul>
</li>
<li>
<p>Add reference to SPCAF.BuildActivity.TFS2012 to the project from the previously created folder “CustomAssemblies”</p>
<p>See below the Visual Studio project with all references, the linked DefaultTemplateSPCAF.xaml</p>




























<img 
  sizes="(min-width: 25em) 720px, 100vw"
  srcset='
  
    /sharepoint/run-spcaf-analysis-teambuild/120613_1318_HowtorunSPC4_hu43b73a7f49f6d1330f7e181a328c712c_122010_400x0_resize_q90_box.jpg 400w
  
  
    , /sharepoint/run-spcaf-analysis-teambuild/120613_1318_HowtorunSPC4_hu43b73a7f49f6d1330f7e181a328c712c_122010_500x0_resize_q90_box.jpg 500w
  
  
    , /sharepoint/run-spcaf-analysis-teambuild/120613_1318_HowtorunSPC4_hu43b73a7f49f6d1330f7e181a328c712c_122010_600x0_resize_q90_box.jpg 600w
  
  
    , /sharepoint/run-spcaf-analysis-teambuild/120613_1318_HowtorunSPC4_hu43b73a7f49f6d1330f7e181a328c712c_122010_720x0_resize_q90_box.jpg 720w 
  '
  
    src="/sharepoint/run-spcaf-analysis-teambuild/120613_1318_HowtorunSPC4.jpg" 
  
  alt="">
</li>
<li>
<p>Open the process template in designer.</p>
</li>
<li>
<p>Add the SPCAF build activity to the toolbox: Right click in toolbox and select “Choose items…”. In tab System.Activites Components select “Browse…” and select the assembly SPCAF.BuildActivity.TFS2012 from the folder “CustomAssemblies”. The Build Activity appear in the toolbox.</p>
</li>
<li>
<p>Because in TFS 2013 the default build process template is a little bit different we need to add a variable to store the path to the Binaries Directory. Open the tab “Variables”, add a variable named “BinariesDirectory” with the type “String”, you can leave the scope in its default setting.</p>




























<img 
  sizes='(min-width: 25em) 590px, 100vw'
  srcset='
  
    /sharepoint/run-spcaf-analysis-teambuild/120613_1318_HowtorunSPC5_hu3e8aa1eb5ef701e1cf3b14bb029d5e10_14343_400x0_resize_box_2.png 400w
  
  
    , /sharepoint/run-spcaf-analysis-teambuild/120613_1318_HowtorunSPC5_hu3e8aa1eb5ef701e1cf3b14bb029d5e10_14343_500x0_resize_box_2.png 500w
  
  
  '
  
    src="/sharepoint/run-spcaf-analysis-teambuild/120613_1318_HowtorunSPC5.png" 
  
  alt="">
</li>
<li>
<p>In the process template navigate to Compile, Test and Publish and open the try block. Drag a GetEnvironmentVariable<!-- raw HTML omitted --> activity below the “Get Impacted Tests”-activity. Set the activity arguments according to the table below:</p>
<table>
<thead>
<tr>
<th align="left">Argument</th>
<th align="left">Value</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">Name</td>
<td align="left">Microsoft.TeamFoundation.Build.Activities.Extensions.WellKnownEnvironmentVariables.BinariesDirectory</td>
</tr>
<tr>
<td align="left">DisplayName</td>
<td align="left">Get Binaries Folder</td>
</tr>
<tr>
<td align="left">Result</td>
<td align="left">BinariesDirectory</td>
</tr>
</tbody>
</table>
</li>
<li>
<p>Drag the SPCAF build activity below the Get Binaries Folder activity.</p>
<p>You should end up with the following setup:</p>




























<img 
  sizes="(min-width: 25em) 720px, 100vw"
  srcset='
  
    /sharepoint/run-spcaf-analysis-teambuild/120613_1318_HowtorunSPC6_hu2b274c75573e61a562cd8370e5e41330_3994_400x0_resize_box_2.png 400w
  
  
    , /sharepoint/run-spcaf-analysis-teambuild/120613_1318_HowtorunSPC6_hu2b274c75573e61a562cd8370e5e41330_3994_500x0_resize_box_2.png 500w
  
  
  '
  
    src="/sharepoint/run-spcaf-analysis-teambuild/120613_1318_HowtorunSPC6.png" 
  
  alt="">
</li>
<li>
<p>Configure the SPCAF build activity to your needs (see parameters below).</p>




























<img 
  sizes="(min-width: 25em) 720px, 100vw"
  srcset='
  
    /sharepoint/run-spcaf-analysis-teambuild/120613_1318_HowtorunSPC7_hu914df8e114dac61af83fa70e94912f73_56354_400x0_resize_q90_box.jpg 400w
  
  
    , /sharepoint/run-spcaf-analysis-teambuild/120613_1318_HowtorunSPC7_hu914df8e114dac61af83fa70e94912f73_56354_500x0_resize_q90_box.jpg 500w
  
  
    , /sharepoint/run-spcaf-analysis-teambuild/120613_1318_HowtorunSPC7_hu914df8e114dac61af83fa70e94912f73_56354_600x0_resize_q90_box.jpg 600w
  
  
    , /sharepoint/run-spcaf-analysis-teambuild/120613_1318_HowtorunSPC7_hu914df8e114dac61af83fa70e94912f73_56354_720x0_resize_q90_box.jpg 720w 
  '
  
    src="/sharepoint/run-spcaf-analysis-teambuild/120613_1318_HowtorunSPC7.jpg" 
  
  alt="">
</li>
<li>
<p>Save the process template and check in.</p>
</li>
</ol>
<h3 id="parameters-of-build-activity">Parameters of Build Activity</h3>
<p>The following parameters can be configured for the build activity.</p>
<table>
<thead>
<tr>
<th align="left">Argument</th>
<th align="left">Description</th>
<th align="left">Sample Value</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">DisplayName</td>
<td align="left">Required String. Title of activity, used in logfiles.</td>
<td align="left">“Run SharePoint Code Analysis SPCAF”</td>
</tr>
<tr>
<td align="left">SettingsFile</td>
<td align="left">Optional String. Name of settings file in folder “/RuleSets” or full path to a different ruleset file.</td>
<td></td>
</tr>
<tr>
<td align="left">TempFolder</td>
<td align="left">Optional String. Path to temp folder. If not set SPCAF uses a standard temp folder.</td>
<td></td>
</tr>
<tr>
<td align="left">FailBuildOnError</td>
<td align="left">Optional Boolean. Default FALSE. If TRUE the build fails if SPCAF detects errors.</td>
<td align="left">FALSE</td>
</tr>
<tr>
<td align="left">IgnoreExceptions</td>
<td align="left">Optional Boolean. Default TRUE. TRUE to ignore exceptions during analysis. Settings this value helps to ensure that the build finishes successfully also in case of exceptions.</td>
<td align="left">TRUE</td>
</tr>
<tr>
<td align="left">InputDirectory</td>
<td align="left">Required String. Path to WSP solutions. Can be a folder name or a list of files (separated by ‘;’).</td>
<td align="left">BinariesDirectory</td>
</tr>
<tr>
<td align="left">LogExceptionStack</td>
<td align="left">Optional Boolean. Default FALSE. In case of problems with SPCAF setting this value to TRUE adds more information to the logfile which describes the error in detail.</td>
<td align="left">FALSE</td>
</tr>
<tr>
<td align="left">OutputFilename</td>
<td align="left">Optional String. Defines the ouptput filename of the reports. Typically the output folder should be in the BinariesDirectory. After successful build the whole BinariesDirectory is copied to the DropLocation. Alternatively the DropLocation or any other folder can be used to save the results.</td>
<td align="left">System.IO.Path.Combine(BinariesDirectory, “SPCAFResults\SPCAFResults.xml”)</td>
</tr>
<tr>
<td align="left">LogFile</td>
<td align="left">Optional String. Defines the path to the log file.</td>
<td align="left">System.IO.Path.Combine(BinariesDirectory, “SPCAFResults\spcaf.log”)</td>
</tr>
<tr>
<td align="left">ReportGeneratorTypes</td>
<td align="left">Optional String. Defines which reports should be created</td>
<td align="left">“HTML;XML;DGML;DOCX;PDF”</td>
</tr>
<tr>
<td align="left">TreatWarningsAsErrors</td>
<td align="left">Optional Boolean. Default FALSE. If TRUE all warnings will be evaluated as errors.</td>
<td align="left">FALSE</td>
</tr>
<tr>
<td align="left">ThrowExceptionOnError</td>
<td align="left">Optional Boolean. Default FALSE. If TRUE an exception will be throw in case of critical errors or errors.</td>
<td align="left">FALSE (Available since version 4.5.2)</td>
</tr>
<tr>
<td align="left">Verbosity</td>
<td align="left">Optional String. Detail level of output (e.g. minimal, default: normal).</td>
<td align="left">normal</td>
</tr>
<tr>
<td align="left">SkipProjectCreation</td>
<td align="left">Optional Boolean. Default FALSE. If TRUE no project (.spcaf) file is created as output of the analysis.</td>
<td align="left">FALSE</td>
</tr>
</tbody>
</table>
<p>The build activity returns the following values after analysis.</p>
<table>
<thead>
<tr>
<th align="left">Argument</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">CriticalErrors</td>
<td align="left">Integer. Contains the number of critical errors after analysis.</td>
</tr>
<tr>
<td align="left">Errors</td>
<td align="left">Integer. Contains the number of errors after analysis.</td>
</tr>
<tr>
<td align="left">CriticalWarnings</td>
<td align="left">Integer. Contains the number of critical warnings after analysis.</td>
</tr>
<tr>
<td align="left">Warnings</td>
<td align="left">Integer. Contains the number of warnings after analysis.</td>
</tr>
<tr>
<td align="left">Information</td>
<td align="left">Integer. Contains the number of information after analysis.</td>
</tr>
</tbody>
</table>
<h3 id="create-a-new-build-definition">Create a new Build Definition</h3>
<p>Now we can use the new process template in a new Build Definiiton</p>
<ol>
<li>
<p>Create a new Build Definition in TFS</p>
</li>
<li>
<p>In the build definition goto tab “Process” and select “New..” and “Select an existing XAML file” and choose the DefaultTemplateSPCAF.xaml</p>
</li>
<li>
<p>For building SharePoint projects a special setting is needed: Go in process tab to “3. Advanced” and change the parameter “MSBuild Arguments” to “/p:IsPackaging=true”. This ensure that during the build process the WSP files are created.</p>




























<img 
  sizes="(min-width: 25em) 720px, 100vw"
  srcset='
  
    /sharepoint/run-spcaf-analysis-teambuild/120613_1318_HowtorunSPC8_hue73db6f83614e4825ee7eb867434103c_118815_400x0_resize_q90_box.jpg 400w
  
  
    , /sharepoint/run-spcaf-analysis-teambuild/120613_1318_HowtorunSPC8_hue73db6f83614e4825ee7eb867434103c_118815_500x0_resize_q90_box.jpg 500w
  
  
    , /sharepoint/run-spcaf-analysis-teambuild/120613_1318_HowtorunSPC8_hue73db6f83614e4825ee7eb867434103c_118815_600x0_resize_q90_box.jpg 600w
  
  
    , /sharepoint/run-spcaf-analysis-teambuild/120613_1318_HowtorunSPC8_hue73db6f83614e4825ee7eb867434103c_118815_720x0_resize_q90_box.jpg 720w 
  '
  
    src="/sharepoint/run-spcaf-analysis-teambuild/120613_1318_HowtorunSPC8.jpg" 
  
  alt="">
</li>
<li>
<p>Run a build with the new Build Definition. To check if SPCAF was configured correctly check the log. There you can find the output of the analysis.</p>




























<img 
  sizes="(min-width: 25em) 720px, 100vw"
  srcset='
  
    /sharepoint/run-spcaf-analysis-teambuild/120613_1318_HowtorunSPC9_huacc2ab2e567830fd5fc0af0a4bd77839_107805_400x0_resize_q90_box.jpg 400w
  
  
    , /sharepoint/run-spcaf-analysis-teambuild/120613_1318_HowtorunSPC9_huacc2ab2e567830fd5fc0af0a4bd77839_107805_500x0_resize_q90_box.jpg 500w
  
  
    , /sharepoint/run-spcaf-analysis-teambuild/120613_1318_HowtorunSPC9_huacc2ab2e567830fd5fc0af0a4bd77839_107805_600x0_resize_q90_box.jpg 600w
  
  
    , /sharepoint/run-spcaf-analysis-teambuild/120613_1318_HowtorunSPC9_huacc2ab2e567830fd5fc0af0a4bd77839_107805_720x0_resize_q90_box.jpg 720w 
  '
  
    src="/sharepoint/run-spcaf-analysis-teambuild/120613_1318_HowtorunSPC9.jpg" 
  
  alt="">
</li>
<li>
<p>In case of found errors and warnings during analysis the result can be found in the Build Summary.</p>




























<img 
  sizes="(min-width: 25em) 720px, 100vw"
  srcset='
  
    /sharepoint/run-spcaf-analysis-teambuild/120613_1318_HowtorunSPC10_hue615dfaf54cd09bcb3809b892bab3c1d_146079_400x0_resize_q90_box.jpg 400w
  
  
    , /sharepoint/run-spcaf-analysis-teambuild/120613_1318_HowtorunSPC10_hue615dfaf54cd09bcb3809b892bab3c1d_146079_500x0_resize_q90_box.jpg 500w
  
  
    , /sharepoint/run-spcaf-analysis-teambuild/120613_1318_HowtorunSPC10_hue615dfaf54cd09bcb3809b892bab3c1d_146079_600x0_resize_q90_box.jpg 600w
  
  
    , /sharepoint/run-spcaf-analysis-teambuild/120613_1318_HowtorunSPC10_hue615dfaf54cd09bcb3809b892bab3c1d_146079_720x0_resize_q90_box.jpg 720w 
  '
  
    src="/sharepoint/run-spcaf-analysis-teambuild/120613_1318_HowtorunSPC10.jpg" 
  
  alt="">
</li>
<li>
<p>Navigate to the DropLocation. There you should find the created SPCAF reports.</p>




























<img 
  sizes="(min-width: 25em) 720px, 100vw"
  srcset='
  
    /sharepoint/run-spcaf-analysis-teambuild/120613_1318_HowtorunSPC11_hu94f0bc8d29bfae9a4517feb1ae82a39a_166604_400x0_resize_q90_box.jpg 400w
  
  
    , /sharepoint/run-spcaf-analysis-teambuild/120613_1318_HowtorunSPC11_hu94f0bc8d29bfae9a4517feb1ae82a39a_166604_500x0_resize_q90_box.jpg 500w
  
  
    , /sharepoint/run-spcaf-analysis-teambuild/120613_1318_HowtorunSPC11_hu94f0bc8d29bfae9a4517feb1ae82a39a_166604_600x0_resize_q90_box.jpg 600w
  
  
    , /sharepoint/run-spcaf-analysis-teambuild/120613_1318_HowtorunSPC11_hu94f0bc8d29bfae9a4517feb1ae82a39a_166604_720x0_resize_q90_box.jpg 720w 
  '
  
    src="/sharepoint/run-spcaf-analysis-teambuild/120613_1318_HowtorunSPC11.jpg" 
  
  alt="">
</li>
</ol>

    </div>
    <footer>
      <ul class="stats">
  <li class="categories">
    <ul>
    
      
        
          <li><a class="article-terms-link" href="/categories/sharepoint/">SharePoint</a></li>
        
          <li><a class="article-terms-link" href="/categories/tfs/">TFS</a></li>
        
      
    
    </ul>
  </li>
  <li class="tags">
    <ul>
    
      
        
          <li><a class="article-terms-link" href="/tags/build/">Build</a></li>
        
          <li><a class="article-terms-link" href="/tags/spcaf/">SPCAF</a></li>
        
          <li><a class="article-terms-link" href="/tags/tfs-2013/">TFS 2013</a></li>
        
      
    
    </ul>
  </li>
</ul>

    </footer>
  </article>
  

  <div class="pagination">
  
    <a href="/sharepoint/run-spcaf-analysis-teambuild-tfs-2013/" class="button"><div class="previous"><div>How to run SPCAF v4 analysis during TeamBuild in TFS 2013</div></div></a>
  
  
    <a href="/hugo/bye-bye-wordpress-hello-hugo/" class="button"><div class="next"><div>Bye bye Wordpress, Hello Hugo</div></div></a>
  
</div>


      </main>
      <section id="site-sidebar">
  
    <section id="recent-posts">
      <header>
        <h1>Recent posts</h1>
      </header>
      
      <article class="mini-post">
        <section>
          
  <a href="/hugo/bye-bye-wordpress-hello-hugo/" class="image featured">
    
      <img src="https://joosthaneveer.github.io/wp-content/uploads/2020/06/hugo.png" alt="">
    
  </a>


        </section>
        <header>
          <h2><a href="/hugo/bye-bye-wordpress-hello-hugo/">Bye bye Wordpress, Hello Hugo</a></h2>
          <time class="published" datetime="">June 22, 2020</time>
        </header>
      </article>
      
      <article class="mini-post">
        <section>
          
  <a href="/sharepoint/run-spcaf-analysis-teambuild/" class="image featured">
    
      <img src="https://joosthaneveer.github.io/wp-content/uploads/2013/12/120613_1318_HowtorunSPC9.jpg" alt="">
    
  </a>


        </section>
        <header>
          <h2><a href="/sharepoint/run-spcaf-analysis-teambuild/">How to run SPCAF v5 analysis during TeamBuild in TFS 2013</a></h2>
          <time class="published" datetime="">October 16, 2014</time>
        </header>
      </article>
      
      <article class="mini-post">
        <section>
          

        </section>
        <header>
          <h2><a href="/sharepoint/run-spcaf-analysis-teambuild-tfs-2013/">How to run SPCAF v4 analysis during TeamBuild in TFS 2013</a></h2>
          <time class="published" datetime="">December 6, 2013</time>
        </header>
      </article>
      
      
        <footer>
          <a href="/posts/" class="button">See more</a>
        </footer>
      
    </section>
  

  
    
      <section id="categories">
        <header>
          <h1><a href="/categories">Categories</a></h1>
        </header>
        <ul>
          
            
          
          
          <li>
            
              <a href="/categories/sharepoint/">sharepoint<span class="count">5</span></a>
            
          
          <li>
            
              <a href="/categories/tfs/">tfs<span class="count">3</span></a>
            
          
          <li>
            
              <a href="/categories/asp.net/">asp.net<span class="count">1</span></a>
            
          
          <li>
            
              <a href="/categories/azure/">azure<span class="count">1</span></a>
            
          
          <li>
            
              <a href="/categories/hugo/">hugo<span class="count">1</span></a>
            
          
          <li>
            
              <a href="/categories/jquery/">jquery<span class="count">1</span></a>
            
          
          <li>
            
              <a href="/categories/msdn/">msdn<span class="count">1</span></a>
            
          
          <li>
            
              <a href="/categories/mvc-5/">mvc-5<span class="count">1</span></a>
            
          
          <li>
            
              <a href="/categories/windows-server-2012-r2/">windows-server-2012-r2<span class="count">1</span></a>
            
          
          </li>
        </ul>
      </section>
    
  

  
    <section id="mini-bio">
      <header>
        <h1>About</h1>
      </header>
      <p>This blog is maintained by Joost Haneveer.</p>
      <footer>
        <a href="/about" class="button">Learn More</a>
      </footer>
    </section>
  
</section>

      <footer id="site-footer">
  
      <ul class="socnet-icons">
        

        <li><a href="//github.com/joosthaneveer" target="_blank" rel="noopener" title="GitHub" class="fab fa-github"></a></li>











<li><a href="//linkedin.com/in/joosthaneveer" target="_blank" rel="noopener" title="LinkedIn" class="fab fa-linkedin"></a></li>















<li><a href="//twitter.com/joosthaneveer" target="_blank" rel="noopener" title="Twitter" class="fab fa-twitter"></a></li>













      </ul>
  
  <p class="copyright">
    
      &copy; 2020
      
        Joost Haneveer
      
    . <br>
    Theme: <a href='https://github.com/pacollins/hugo-future-imperfect-slim' target='_blank' rel='noopener'>Hugo Future Imperfect Slim</a><br>A <a href='https://html5up.net/future-imperfect' target='_blank' rel='noopener'>HTML5 UP port</a> | Powered by <a href='https://gohugo.io/' title='0.73.0' target='_blank' rel='noopener'>Hugo</a>
  </p>
</footer>
<a id="back-to-top" href="#" class="fas fa-arrow-up fa-2x"></a>

      <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.0.3/highlight.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.0.3/languages/css.min.js"></script><script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.0.3/languages/javascript.min.js"></script><script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.0.3/languages/ini.min.js"></script><script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.0.3/languages/xml.min.js"></script>
    <script>hljs.initHighlightingOnLoad();</script><script src="//code.jquery.com/jquery-3.5.1.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.js"></script>
    <script src="//unpkg.com/lunr/lunr.js"></script><script src="/js/bundlecdn.min.4f85b1062dec11ea3ea1a8143a9d777d63b3345aa5d0f1fc2764f7f1e8e274e6.js" integrity="sha256-T4WxBi3sEeo&#43;oagUOp13fWOzNFql0PH8J2T38ejidOY=">
    <script src="\/js\/add-on.js"></script>
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-30235886-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>

    </div>
  </body>
</html>
